# Server Management Guide - Nova Gig Score

## Current Running Configuration ✅

| Service | Status | Port | Command | Mode |
|---------|--------|------|---------|------|
| **FastAPI Backend** | ✅ Running | 8000 | `python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000` | Development |
| **Node.js Middleware** | ✅ Running | 3001 | `npm run dev` | Development (nodemon) |
| **React Frontend** | ✅ Running | 8080 | `npm run dev` | Development |

## Quick Commands

### Check Server Status
```bash
# Health check for all services
curl http://localhost:3001/health

# Check individual services
curl http://localhost:8000/health  # FastAPI only
curl http://localhost:8080         # Frontend
```

### Start Services (Development Mode)

**Terminal 1 - FastAPI Backend:**
```bash
cd Backend
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

**Terminal 2 - Node.js Middleware:**
```bash
cd Backend
npm run dev  # Uses nodemon for auto-restart
```

**Terminal 3 - React Frontend:**
```bash
cd Frontend
npm run dev
```

### Start Services (Production Mode)

**Terminal 1 - FastAPI Backend:**
```bash
cd Backend
python -m uvicorn main:app --host 0.0.0.0 --port 8000
```

**Terminal 2 - Node.js Middleware:**
```bash
cd Backend
npm start  # No auto-restart
```

**Terminal 3 - React Frontend:**
```bash
cd Frontend
npm run build  # Build for production
npm run preview  # Serve built files
```

## Port Conflict Resolution

### If Port 8000 is in use:
```bash
# Find what's using the port
netstat -ano | findstr :8000

# Kill the process (replace XXXX with actual PID)
taskkill /PID XXXX /F

# Restart FastAPI
cd Backend && python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### If Port 3001 is in use:
```bash
# Find what's using the port
netstat -ano | findstr :3001

# Kill the process (replace XXXX with actual PID)
taskkill /PID XXXX /F

# Restart Node.js
cd Backend && npm run dev
```

### If Port 8080 is in use:
```bash
# Frontend will automatically try the next available port (8081, 8082, etc.)
# Or manually specify a port:
cd Frontend && npm run dev -- --port 8081
```

## Development vs Production

### Development Mode Benefits:
- **Auto-restart** on file changes (nodemon for Node.js, --reload for FastAPI)
- **Hot reloading** for React
- **Detailed error messages**
- **Source maps** for debugging

### Production Mode Benefits:
- **Better performance**
- **Smaller bundle sizes**
- **Optimized builds**
- **Security hardening**

## Stopping Services

### Stop Individual Services:
- **Ctrl+C** in each terminal window

### Stop All Services (Emergency):
```bash
# Kill all Python processes (use with caution)
taskkill /F /IM python.exe

# Kill all Node processes (use with caution)
taskkill /F /IM node.exe
```

### Stop Specific Processes:
```bash
# Find and kill by port
netstat -ano | findstr :8000
taskkill /PID [PID] /F

netstat -ano | findstr :3001
taskkill /PID [PID] /F
```

## Monitoring & Logs

### View Real-time Logs:
- **FastAPI**: Check Terminal 1 for request logs and errors
- **Node.js**: Check Terminal 2 for proxy logs and API calls
- **React**: Check Terminal 3 for build logs and warnings

### Common Log Messages:

**✅ Success Indicators:**
- FastAPI: `"Application startup complete"` + `"Model loaded successfully"`
- Node.js: `"Node.js middleware server running on port 3001"`
- React: `"Local: http://localhost:8080/"`

**⚠️ Warning Messages:**
- XGBoost: `"configuration generated by an older version"` (safe to ignore)
- React: Future flag warnings (safe to ignore)

**❌ Error Indicators:**
- `EADDRINUSE`: Port already in use
- `WinError 10013`: Permission denied
- `Connection refused`: Service not running

## Performance Tips

### For Development:
- Use `npm run dev` for auto-restart capabilities
- Keep terminals open to monitor logs
- Use browser dev tools for frontend debugging

### For Production:
- Use `npm start` for stable operation
- Implement proper logging solutions
- Use process managers like PM2 for Node.js
- Use reverse proxy (nginx) for production deployment

## Backup & Recovery

### Save Current Configuration:
```bash
# Export current processes
netstat -ano > running_services.txt

# Backup package files
copy Backend\package.json Backend\package.json.backup
copy Frontend\package.json Frontend\package.json.backup
```

### Quick Recovery:
```bash
# If services crash, restart in order:
# 1. FastAPI first (other services depend on it)
# 2. Node.js middleware
# 3. React frontend
```

## Access URLs

- **Frontend Application**: http://localhost:8080
- **API Health Check**: http://localhost:3001/health
- **FastAPI Documentation**: http://localhost:8000/docs
- **FastAPI OpenAPI Schema**: http://localhost:8000/openapi.json