# Troubleshooting Guide - Nova Gig Score

## Common Issues and Solutions

### 1. Port 8000 Access Error (WinError 10013)

**Error Message:**
```
ERROR: [WinError 10013] An attempt was made to access a socket in a way forbidden by its access permissions
```

**Cause:** Port 8000 is already in use by another process (usually a previous FastAPI instance).

**Solution:**

#### Step 1: Check what's using port 8000
```bash
netstat -ano | findstr :8000
```

#### Step 2: Kill the conflicting process
```bash
# Replace XXXX with the actual PID from step 1
taskkill /PID XXXX /F
```

#### Step 3: Restart FastAPI server
```bash
cd Backend && python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

#### Alternative: Use a different port
```bash
cd Backend && python -m uvicorn main:app --reload --host 0.0.0.0 --port 8001
```
*Note: If using a different port, update the `FASTAPI_URL` in `Backend/server.js`*

### 2. Node.js Dependencies Issues

**Error:** `npm install` fails or modules not found

**Solution:**
```bash
cd Backend
npm cache clean --force
npm install
```

### 3. Python Dependencies Issues

**Error:** Module import errors or version conflicts

**Solution:**
```bash
cd Backend
pip install --upgrade pip
pip install -r requirements.txt --force-reinstall
```

### 4. XGBoost Model Loading Warning

**Warning:** "Configuration generated by an older version of XGBoost"

**Status:** This is a warning, not an error. The model still loads and works correctly.

**Optional Fix:** Re-save your model with the current XGBoost version:
```python
import joblib
import xgboost as xgb

# Load and re-save the model
model = joblib.load('ML_Models/xgb_tuned.joblib')
model.save_model('ML_Models/xgb_tuned_new.joblib')
```

### 5. CORS Issues

**Error:** Cross-origin request blocked

**Solution:** Ensure both FastAPI and Node.js servers have proper CORS configuration (already included in the provided code).

### 6. Frontend Connection Issues

**Error:** API calls failing from frontend

**Checklist:**
1. ✅ FastAPI server running on port 8000
2. ✅ Node.js middleware running on port 3001
3. ✅ Frontend running on port 8080 (or 5173)
4. ✅ Check browser console for specific error messages

**Test API manually:**
```bash
curl http://localhost:3001/health
```

### 7. Model Prediction Errors

**Error:** Prediction endpoint returns errors

**Common causes:**
- Missing required fields in request
- Data type mismatches
- Model file corruption

**Debug steps:**
1. Check FastAPI logs in terminal
2. Test with demo data first
3. Verify all required fields are present

### 8. Windows Firewall Issues

**Error:** Connection refused or timeout

**Solution:**
1. Allow Python and Node.js through Windows Firewall
2. Or temporarily disable Windows Firewall for testing
3. Add firewall rules for ports 3001, 8000, and 8080

### 9. Permission Issues

**Error:** Access denied when starting servers

**Solution:**
- Run terminals as Administrator
- Or use localhost instead of 0.0.0.0:
```bash
python -m uvicorn main:app --reload --host localhost --port 8000
```

### 10. Port Already in Use (Alternative Ports)

If you need to use different ports, update these files:

**Backend/server.js:**
```javascript
const FASTAPI_URL = process.env.FASTAPI_URL || 'http://localhost:8001';
```

**Frontend API calls:**
```javascript
const response = await fetch('http://localhost:3002/api/predict', {
```

## Quick Diagnostic Commands

```bash
# Check all services
curl http://localhost:3001/health

# Check specific ports
netstat -ano | findstr :8000
netstat -ano | findstr :3001
netstat -ano | findstr :8080

# Kill all Python processes (use with caution)
taskkill /F /IM python.exe

# Kill all Node processes (use with caution)
taskkill /F /IM node.exe
```

## Getting Help

If you encounter issues not covered here:

1. Check the terminal logs for specific error messages
2. Ensure all dependencies are installed correctly
3. Verify file paths and permissions
4. Test each component individually (FastAPI → Node.js → Frontend)

## Success Indicators

When everything is working correctly, you should see:

- **FastAPI Terminal:** "Application startup complete" + "Model loaded successfully"
- **Node.js Terminal:** "Node.js middleware server running on port 3001"
- **Frontend Terminal:** "Local: http://localhost:8080/"
- **Health Check:** `{"status":"healthy","model_loaded":true,"features_loaded":true,"feature_count":27}`